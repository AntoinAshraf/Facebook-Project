@model Facebook.Models.ViewModels.ProfilePageDto
@{
    ViewData["Title"] = @TempData["Users"];
}

<div class="col-lg-3 col-md-4 pd-left-none no-pd">
    <div class="main-left-sidebar no-margin">
        <div class="user-data full-width">
            <div class="user-profile">
                <div class="username-dt">
                    <div class="usr-pic">
                        @{
                            if (Model.UserProfilePhoto == null)
                            {
                                <img src="~/ProfilePics/default.jpg" alt="">
                            }
                            else
                            {
                                <img src="~/ProfilePics/@Model.UserProfilePhoto" alt="">
                            }
                        }
                        <img src="@Model.UserProfilePhoto" alt="">
                    </div>
                </div><!--username-dt end-->
                <div class="user-specs">
                    <h3>@Model.UserInfo.FullName</h3>
                    <span>Graphic Designer at Self Employed</span>
                </div>
            </div><!--user-profile end-->
            <ul class="user-fw-status">
                <li>
                    <h4>Friends</h4>
                    <span>@Model.NumberOfFriends</span>
                </li>
            </ul>
        </div><!--user-data end-->


        @{ 
            if (Model.CanEditProfileWritePost)
            {

              <div class="suggestions full-width">
            <div class="sd-title">
                <h3>Friend Requests</h3>
            </div><!--sd-title end-->
            @foreach (var friendRequest in Model.FriendRequests)
            {
                <div class="suggestions-list">
                    <div class="suggestion-usd">
                        @{
                            if (friendRequest.Photo == null)
                            {
                                <img src="~/ProfilePics/default.jpg" alt="">
                            }
                            else
                            {
                                <img src="~/ProfilePics/@friendRequest.Photo" alt="">
                            }
                        }
                        <div class="sgt-text">
                            <h4>@friendRequest.FullName</h4>
                            <span>Graphic Designer</span>
                        </div>
                        <span><i class="la la-minus" onclick="rejectRequest()"></i></span>
                        <span><i class="la la-plus" onclick="AcceptRequest()"></i></span>
                    </div>
                </div><!--suggestions-list end-->
            }
            <div class="view-more">
                <a href="#" title="">View More</a>
            </div>
        </div>
            
            }
        }

        <div class="tags-sec full-width">
            <ul>

                <li><a href="#" title="">About</a></li>
                <li><a href="#" title="">Language</a></li>
                <li><a href="#" title="">Copyright Policy</a></li>
            </ul>
            <div class="cp-sec">
                <img src="~/images/facebook-logo-word.png" alt="fblogo" />
                <p>&copy; Copyright 2020</p>
            </div>
        </div><!--tags-sec end-->
    </div><!--main-left-sidebar end-->
</div>


@*Middle Side (Post creation & Showing All Posts)*@
<div class="col-lg-6 col-md-8 no-pd">
    <div class="main-ws-sec">
        <div class="user-tab-sec">
            <h3>John Doe</h3>
            <div class="star-descp">
                <span>Graphic Designer at Self Employed</span>
            </div><!--star-descp end-->
            <div class="tab-feed">
                <ul>
                    <li data-tab="feed-dd" class="animated fadeIn active">
                        <a href="#" title="">
                            <img src="~/images/ic1.png" alt="">
                            <span>Posts</span>
                        </a>
                    </li>
                    <li data-tab="info-dd" class="animated fadeIn">
                        <a href="#" title="">
                            <img src="~/images/ic2.png" alt="">
                            <span>Info</span>
                        </a>
                    </li>
                </ul>
            </div><!-- tab-feed end-->
        </div><!--user-tab-sec end-->
        <div class="product-feed-tab animated fadeIn current" id="feed-dd">

            @{
                if (Model.CanEditProfileWritePost)
                {

                    <div class="post-topbar">
                        <div class="post-st">
                            <ul>
                                <li> <a id="popBtn" data-toggle="modal" data-target="#myModal">What's in your mind?</a></li>
                            </ul>
                        </div><!--post-st end-->
                    </div>


                    <div id="myModal" class="modal fade" role="dialog">
                        <div class="modal-dialog modal-dialog-edit">
                            <button type="button" class="btn btn-default btn-circle" data-dismiss="modal"><i class="la la-times-circle-o"></i></button>
                            <!-- Modal content-->
                            <div class="modal-content">
                                <form enctype="multipart/form-data">
                                    <div class="modal-header model-header-edit">
                                        <h3 id="createTitle">Create Post</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="post-body">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <textarea id="postTextArea" class="form-control" rows="3" name="PostContent" placeholder="What's in your mind..."></textarea>
                                                </div>
                                                <div class="col-lg-12 row " id="image-category">

                                                </div>
                                                <div class="col-lg-12">
                                                    <i class="fas fa-image" style="font-size:40px; color:#0e385f;"></i>
                                                    <div class="custom-file">
                                                        <input type="file" class="custom-file-input" id="postImage">
                                                        <label class="custom-file-label" for="customFile">Choose Image</label>
                                                    </div>
                                                </div>
                                                <hr />
                                            </div>
                                        </div><!--post-project-fields end-->
                                    </div>
                                    <div class="modal-footer-Edit modal-footer" style="float:right">
                                        <button type="button" class="btn btn-default bg-danger text-white" data-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn text-white" style="background-color:#0e385f" id="submit" onclick="createPost()">Post</button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                    <!-- Modal -->
                }
            }



            <div class='posts-section' id="posts">
                @foreach (var post in Model.Posts)
                {

                    <div id="post_@post.PostId" class="posty">
                        <div class="post-bar no-margin">
                            <div class="post_topbar">
                                <div class="usy-dt">
                                    @{
                                        if (@Model.UserProfilePhoto == null)
                                        {<img class="friendListPic" src="~/ProfilePics/default.jpg" alt=""> }
                                        else
                                        {<img class="friendListPic" src="@Model.UserProfilePhoto" alt=""> }
                                    }
                                    <div class="usy-name">
                                        <h3>@Model.UserInfo.FullName</h3>
                                        <span><img src="images/clock.png" alt="">@post.PostDate</span>
                                    </div>
                                </div>
                                @if (post.CanChange)
                                {
                                    <div class="ed-opts">
                                        <a title="" href="#" class="ed-opts-open"><i class="la la-ellipsis-v"></i></a>
                                        <ul class="ed-options">
                                            <li><a onclick="getPostById(@post.PostId)" title="">Edit Post</a></li>
                                            <li><a onclick="deletePost(@post.PostId)" title="">Delete Post</a></li>
                                        </ul>
                                    </div>
                                }
                            </div>

                            <div class="job_descp">
                                <p id="postContent_@post.PostId">@post.PostContent</p>
                                @if (post.PostPhoto != null)
                                {
                                    <img style="margin-left:23%; width:250px" src="@post.PostPhoto" />
                                }
                            </div>
                            <div class="job-status-bar">
                                <ul class="like-com">
                                    <li>
                                        <a>
                                            <i id="heart_@post.PostId" onclick="SendLike(@post.PostId)" style="color:@{
                                        if (post.IsLike)
                                        {
                                            @:blue
                                        }
                                        else
                                        {
                                            @:gray
                                        }
                                            }" class="la la-heart"></i>
                                            <button style="color:#076bec; border:none; background-color:white;" type="button" data-toggle="modal" data-target="#exampleModal_@post.PostId">Likes</button>
                                        </a>
                                        <img src="images/liked-img.png" alt="">
                                        <span id="likeNumber_@post.PostId" style="margin-left:1px">@post.numOfLikes</span>
                                    </li>
                                    <li>
                                        <a style="margin-top:16px" title="" class="com"><img src="images/com.png" alt=""> Comments </a>
                                        <span id="commentNumber_@post.PostId" style="margin-left:1px">@post.numOfComments</span>
                                    </li>
                                </ul>
                            </div>
                        </div><!--post-bar end-->
                        <div class="comment-section">
                            <div class="comment-sec">
                                <ul id="commentContainer_@post.PostId">
                                    @foreach (var comment in post.Comments)
                                    {
                                        <li>
                                            <div class="comment-list">
                                                <div class="bg-img">
                                                    @{
                                                        if (comment.CreatorPhoto == null)
                                                        {
                                                            <img class="friendListPic" src="~/ProfilePics/default.jpg" alt="">
                                                        }
                                                        else
                                                        { <img class="friendListPic" src="@comment.CreatorPhoto" alt=""> }
                                                    }
                                                </div>
                                                <div class="comment">
                                                    <h3>
                                                        @comment.FullNameCreator/h3>
                                                        <span><img src="images/clock.png" alt="">@comment.commentDate</span>
                                                        <p>@comment.CommentContent</p>
                                                </div>
                                            </div><!--comment-list end-->
                                        </li>
                                    }
                                </ul>
                            </div><!--comment-sec end-->
                            <div class="post-comment">
                                <div class="comment_box">
                                    <form>
                                        <input id="commentTextBox_@post.PostId" type="text" placeholder="Post a comment">
                                        <button id="sendBtn_@post.PostId" type="button" onclick="SendComment(@post.PostId)">Comment</button>
                                    </form>
                                </div>
                            </div><!--post-comment end-->
                        </div><!--comment-section end-->
                    </div>

                    <!-- Likes Model -->
                    <div class="modal fade" id="exampleModal_@post.PostId" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Likes</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <div id="likesContainer_@post.PostId" class="modal-body">
                                    @if (post.numOfLikes != 0)
                                    {
                                        @foreach (var like in post.Likes)
                                        {
                                            <div class="comment-list">
                                                <div class="bg-img">
                                                    <img class="friendListPic" src="@like.PhotoCreatorLike" alt="">
                                                </div>
                                                <div class="comment">
                                                    <h3>@like.FullNameCreatorLike</h3>
                                                </div>
                                            </div>
                                        }
                                    }
                                    else
                                    {
                                        <div class="comment-list">
                                            <div class="comment">
                                                <h3>There are no reactions for this post yet.</h3>
                                            </div>
                                        </div>
                                    }
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div><!--product-feed-tab end-->

        <div class="product-feed-tab animated fadeIn" id="info-dd">
            <div class="user-profile-ov st2">
                <h3><a href="#" title="" class="exp-bx-open"> </a>
                <a href="#" title="" class="exp-bx-open"><i class="fa fa-pencil"></i></a> <a href="#" title="" class="exp-bx-open"></a></h3>
                <h4>Web designer <a href="#" title=""><i class="fa fa-pencil"></i></a></h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor aliquam felis, nec condimentum ipsum commodo id. Vivamus sit amet augue nec urna efficitur tincidunt. Vivamus consectetur aliquam lectus commodo viverra. </p>
                <h4>UI / UX Designer <a href="#" title=""><i class="fa fa-pencil"></i></a></h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor aliquam felis, nec condimentum ipsum commodo id.</p>
                <h4>PHP developer <a href="#" title=""><i class="fa fa-pencil"></i></a></h4>
                <p class="no-margin">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque tempor aliquam felis, nec condimentum ipsum commodo id. Vivamus sit amet augue nec urna efficitur tincidunt. Vivamus consectetur aliquam lectus commodo viverra. </p>
            </div><!--user-profile-ov end-->
        </div><!--product-feed-tab end-->
    </div>
</div>


@*Right Side (Welcome Panel & Friends List)*@
<div class="col-lg-3">
    <div class="right-sidebar">
        <div class="widget widget-portfolio">
            <div class="wd-heady">
                <h3>Portfolio</h3>
                <img src="images/photo-icon.png" alt="">
            </div>
            <div class="pf-gallery">
                <ul>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                    <li><a href="#" title=""><img src="http://via.placeholder.com/70x70" alt=""></a></li>
                </ul>
            </div><!--pf-gallery end-->
        </div><!--widget-portfolio end-->
    </div><!--right-sidebar end-->
</div>

@section scripts {
    <script src="~/js/CreatePost.js"></script>

    <script src="~/js/CreatePostVald.js"></script>

    <script type="text/javascript" src="~/js/GetAllPostsProfile.js"></script>

    <script src="~/js/UploadImage.js"></script>

}
